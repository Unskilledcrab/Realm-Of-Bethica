function confirmDelete(n,t){var i="deleteSpan_"+n,r="confirmDeleteSpan_"+n;t?($("#"+i).hide(),$("#"+r).show()):($("#"+i).show(),$("#"+r).hide())}function clearSideBar(){sideBarTitle.empty();sideBarContent.empty()}function setSidebarTitle(n){sideBarTitle.append(`<h2>`+n+`</h2>`)}function setSidebarContent(n){sideBarContent.append(n)}function openNav(){document.getElementById("mySidebar").style.width="250px";$("#sidebar").addClass("active");$(".overlay").addClass("active")}function closeNav(){document.getElementById("mySidebar").style.width="0";$("#sidebar").removeClass("active");$(".overlay").removeClass("active")}function filterGroups(n){for(var i,r=$(".groupId"),t=0;t<r.length;t++)i=r[t],i.style.display=i.classList.contains("class_"+n)?"block":"none"}function getViewCost(n){var t=0,i="";return n<100?(t=n,i=" cu"):n<1e3?(t=n/100,i=" sp"):n<1e4?(t=n/1e3,i=" gold"):(t=n/1e4,i=" plat"),t+i}function sideBarLevel(){clearSideBar();setSidebarTitle("Level");setSidebarContent(getLevelContent());openNav()}function getLevelContent(){var n=$("#levelDisplay").text(),i=parseInt(n),t=i+1;return t=String(t),`<h3><span><i class="fas fa-minus-square" onclick="addValue('level',-1)"></i> <span id="levelDisplay">`+n+`</span> <i onclick="addValue('level',1)" class="fas fa-plus-square"></i></span></h3>
            <p>
                Your current level is `+n+` out of 10. This marks your character experience. In order to see how much more experience you need to level check out the slider below. After leveling up your character will gain more skills, talents, or techniques
            </p>
            <p>
                Experience is 500 out of 1500 until level `+t+`.
                <div class="progress">
                  <div class="progress-bar bg-success" role="progressbar" style="width: 33%" aria-valuenow="500" aria-valuemin="0" aria-valuemax="1500"></div>
                </div>  
            </p>`}function sideBarLuck(){clearSideBar();setSidebarTitle("Luck");setSidebarContent(getLuckContent());openNav()}function getLuckContent(){var n=$("#luckDisplay").text();return`<p>
                Your current luck is `+n+` out of 5. 
            </p>
            <div class="alert alert-primary" role="alert">
              This is controlled by your DM and can only be modified by your DM after you have joined a campaign
            </div>
            <p>
                Luck is used to automatically make your roll the highest possible outcome. 
            </p>
            <p>
                Example: if you were rolling a 2d8 to attack a monster and rolled a 2 + 1 to equal 3, then you could spend a luck point to make that 3 a 16 (the highest you could have possibly rolled with a 2d8).
            </p>
            <div class="alert alert-warning" role="alert">
               Spend luck points wisely, you will only have a total of 5 unless the DM is gratious enough to give you more!
            </div>`}function sideBarWeaponsManager(){clearSideBar();setSidebarTitle("Weapons Manager");setSidebarContent(getWeaponsManagerContent());openNav()}function getWeaponsManagerContent(){var n="",t=0;return AllWeapons.forEach(function(i){n+=`<tr>
            <td>
                <button class="btn btn-primary" onclick="AddWeaponAsync(`+i.id+`)">Add</button>
            </td>
            <td onclick="showWeaonDetails(`+t+`)">
                `+i.name+`
            </td>
            <td>
                `+i.damageValue+`
            </td>
            <td>
                `+getViewCost(i.cost)+`
            </td>
        </tr>
        `;t++}),`<table class="table">
    <thead>
        <tr>
            <th>Add</th>
            <th>Name</th>
            <th>DV</th>
            <th>Price</th>
        </tr>
    </thead>
    <tbody>        
        `+n+`
    </tbody>
</table>

<div id="csWeaponDetails">
</div>`}function showWeaonDetails(n){details=$("#csWeaponDetails");details.empty();var t=`
        <div class="card text-dark">
        <div class="card-header">
            <h3>`+AllWeapons[n].name+`</h3>
        </div>
        <div class="card-body">
            <h5 class="card-title">Description: `+AllWeapons[n].description+`</h5>
            <h5 class="card-title">Price: `+getViewCost(AllWeapons[n].cost)+`</h5>
            <h5 class="card-title">DV: `+AllWeapons[n].damageValue+`</h5>
        </div>
        <div class="card-footer">
            <p>last updated never</p>
        </div>
        </div>
    `;details.append(t)}$(document).ready(function(){sideBarTitle=$("#sidebarTitle");sideBarContent=$("#sidebarContent")});var CombatCalculator=function(){this.DamageValue=10;this.HP=20;this.EVA=25;this.ToHit=10;this.BaseRoll=1;this.DamageFactor=0;this.ArmorRating=6;this.ArmorRatingBase=6;this.PenatrationDefenseRating=15;this.PenatrationDamageValue=5;this.IsIgnoreArmor=!1;this.IsSpellAttack=!1;this.IsPenatrationOptional=!1;this.IsPenatrationUsed=!1;this.PenatrationOptionPenalty=.5;this.Setup=function(n,t,i,r,u,f,e,o){this.ToHit=n;this.DamageValue=t;this.PenatrationDamageValue=i;this.PenatrationDefenseRating=r;this.EVA=u;this.HP=f;this.ArmorRating=e;this.IsSpellAttack=o};this.DidHit=function(n,t,i){if(n+t>i){if(!this.IsSpellAttack){var r=n+t-i;this.DamageFactor=r>30?2:r>15?1.5:r>5?1:.5;console.log("Damage factor is "+this.DamageFactor)}return!0}return!1};this.HasPenetration=function(n,t){(this.IsPenatrationOptional!=!0||this.IsPenatrationUsed!=!1)&&(n>0?n>t?(this.IsIgnoreArmor=!0,console.log("Penetration occured and is ignoring armor")):(this.IsIgnoreArmor=!1,console.log("Could not penetrate armor")):(this.IsIgnoreArmor=!1,console.log("the weapon does not have penetration")))};this.CalculateHit=function(n){var t=n*this.DamageFactor;if(this.IsPenatrationOptional==!0&&this.IsPenatrationUsed==!0&&(t=Math.ceil(t*this.PenatrationOptionPenalty),console.log("the attacks damage penalty is "+this.PenatrationOptionPenalty+" for using penatration technique")),console.log("attacking for "+t+" damage against armor of "+this.ArmorRating),!this.IsIgnoreArmor&&this.ArmorRating>0)if(t>=this.ArmorRatingBase*.5&&this.CalculateArmorReduction(t,this.ArmorRatingBase),t>this.ArmorRating)t=t-this.ArmorRating,console.log("players armor took "+this.ArmorRating+" damage");else return console.log("players armor took the damage");return(this.HP=this.HP-t,console.log("player took "+t+" damage"),this.HP<1)?console.log("player has been killed"):console.log("player has "+this.HP+" HP remaining")};this.CalculateArmorReduction=function(n,t){if(n<t*2){this.ArmorRating--;console.log("players armor was reduced by 1 and is "+this.ArmorRating);return}var i=Math.floor(n/t);console.log("players armor was reduced by "+i+" and is "+this.ArmorRating);this.ArmorRating=this.ArmorRating-i;this.ArmorRating<0&&(this.ArmorRating=0)};this.Roll=function(n){if(this.HP<0)return console.log("Why would you attack a dead person... you ANIMAL!");this.DidHit(n,this.ToHit,this.EVA)?(this.HasPenetration(this.PenatrationDamageValue,this.PenatrationDefenseRating),this.CalculateHit(this.DamageValue,this.ArmorRating)):console.log("you missed")}},test=new CombatCalculator;